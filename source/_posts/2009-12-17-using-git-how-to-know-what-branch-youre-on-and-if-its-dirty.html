---
layout: post
title: "Using Git? How to know what branch you're on, and if its dirty."
date: 2009-12-17 09:06:32
comments: true
categories:
author: 
---


    Do you lie awake at night dreaming of a way to save your fingers from typing 'git status' too often? Ever wish you could just have an asterisk (*) on the command prompt to tell you that the working directory is dirty? No more insomnia for you; <p />  <div class="thumbnail"><a href="http://skitch.com/glennr/ncyku/terminal-bash-108x34"><img src="http://img.skitch.com/20091217-efbap1ndi2ttnyf88hkg4fstxg.preview.jpg" alt="Terminal 2014 bash 2014 108Õ³4" /></a><br /><span style="font-family:Lucida Grande, Trebuchet, sans-serif, Helvetica, Arial;font-size:10px;color:#808080;">Uploaded with <a href="http://plasq.com/">plasq</a>'s <a href="http://skitch.com">Skitch</a>!</span></div> <p /> Paste this code into your .bash_profile and off you go. <p /> <div class="data type-text">
      <table class="lines" cellspacing="0" cellpadding="0">
        <tr>
          <td>
            <pre class="line_numbers"><span id="L1">1</span>
<span id="L2">2</span>
<span id="L3">3</span>
<span id="L4">4</span>
<span id="L5">5</span>
<span id="L6">6</span>
<span id="L7">7</span>
<span id="L8">8</span>
<span id="L9">9</span>
<span id="L10">10</span>
<span id="L11">11</span>
<span id="L12">12</span>
</pre>
          </td>
          <td width="100%">
                <div class="highlight"><pre /><div class="line" id="LC1"># Bash prompt showing current git branch &amp; marking if dirty: </div><div class="line" id="LC2"># Based on http://henrik.nyh.se/2008/12/git-dirty-prompt </div><div class="line" id="LC3"><br /></div><div class="line" id="LC4">function parse_git_dirty {</div><div class="line" id="LC5">&nbsp;&nbsp;[[ $(git status 2&gt; /dev/null | tail -n1) != &quot;nothing to commit (working directory clean)&quot; ]] &amp;&amp; echo &quot;*&quot;</div><div class="line" id="LC6">}</div><div class="line" id="LC7"><br /></div><div class="line" id="LC8">function parse_git_branch {</div><div class="line" id="LC9">&nbsp;&nbsp;git branch --no-color 2&gt; /dev/null | sed -e &#039;/^[^*]/d&#039; -e &quot;s/* (.*)/[1$(parse_git_dirty)]/&quot;</div><div class="line" id="LC10">}</div><div class="line" id="LC11"><br /></div><div class="line" id="LC12">export PS1=$(echo &quot;$PS1&quot; | sed &#039;s/\w/\w\[33[35m\]$(parse_git_branch)\[33[0m\]/g&#039;)</div></pre></div>
          </td>
        </tr>
      </table>
  </div>
  
