---
layout: post
title: "Vim Tips - Part I"
date: 2012-06-27 07:50:00
comments: true
categories:
author: 
---


    <p>At Siyelo all developers exclusively use Vim editor for coding. In this two-parts series we'll share few Vim tips that we find useful. Most of the tips we've learned from the great <a href="http://pragprog.com/book/dnvim/practical-vim" title="Practical Vim book">Practical Vim</a> book&nbsp;by Drew Neil.</p>
<p><span style="font-size:medium;">1. Repeat the last Ex command</span></p>
<p>In Vim there are 3 command line mode prompts:</p>
<ul style="margin-left:40px;">
<li>Ex command prompt: <strong>:something</strong> </li>
<li>Search prompt: <strong>/something</strong> </li>
<li>Expression prompt (from insert mode type <strong>&lt;C-r&gt;=</strong>):&nbsp;<strong>=1+1</strong> </li>
</ul>
<p>Let say we run a spec from the Ex command prompt like this:</p>
<div class="CodeRay">
  <div class="code"><pre>:!rspec spec/models/code_spec.rb</pre></div>
</div>

<p>We can repeat the last Ex command by typing <strong>@:</strong> from normal mode.</p>
<p><span style="font-size:medium;">2. Repeat the last substitute command</span></p>
<p>If substitute command is run, like for example:</p>
<div class="CodeRay">
  <div class="code"><pre>:s/current_user/user/g</pre></div>
</div>

<p>We can repeat it with <strong>:s</strong> or <strong>&amp;</strong> which is synonym for <strong>:s</strong>. Note that flags used at the substitute command are not remembered, and to fix that <strong>:&amp;&amp;</strong> should be used. It's handy having the following mappings in the vimrc file:</p>
<div class="CodeRay">
  <div class="code"><pre>&quot; make &amp; trigger :&amp;&amp; so it preserves flags
nnoremap &amp; :&amp;&amp;&lt;Enter&gt;
xnoremap &amp; :&amp;&amp;&lt;Enter&gt;</pre></div>
</div>

<p><span style="font-size:medium;">3. Sort properties in CSS</span></p>
<p>Some developers order the CSS properties by grouping them by width-height, margin-padding, other use to order them in alphabetical order. If you belong to the second group, this tip will help not search for the place where to enter the new properties.</p>
<div class="CodeRay">
  <div class="code"><pre>h4 {
  font-size: 11px;
  margin: 15px;
  background: red;
}</pre></div>
</div>

<p>Just append them at the end, select the lines and in visual mode type <strong>:sort</strong>, or from normal mode select everything inside {} with <strong>vi{</strong> and then <strong>:sort</strong>.</p>
<div class="CodeRay">
  <div class="code"><pre>h4 {
  background: red;
  font-size: 11px;
  margin: 15px;
}</pre></div>
</div>

<p><span style="font-size:medium;">4. Select texts</span></p>
<p>Select the original yanked text with <strong>gv</strong> or select the last pasted text with <strong>gb</strong> (custom mapping). <strong>gb</strong> is really usesful when doing extract method refactoring with cut-paste text and then fix the identation with <strong>gb&lt;</strong>. For <strong>gb</strong> to work, the following mapping need to be defined in the vimrc file.</p>
<div class="CodeRay">
  <div class="code"><pre>&quot; select last paste in visual mode
nnoremap &lt;expr&gt; gb '`[' . strpart(getregtype(), 0, 1) . '`]'</pre></div>
</div>

<p><span style="font-size:medium;">5. Paste from register without leaving insert mode &lt;C-r&gt;{register}</span></p>
<p>While in insert mode, yanked text can be pasted without leaving the insert mode with <strong>&lt;C-r&gt;0</strong>. If yanked text contains new line characters, <strong>&lt;C-r&gt;&lt;C-p&gt;0</strong> will take care of fixing the indentation.</p>
<p><span style="font-size:medium;">6. Run normal mode commands across a range</span></p>
<p>Say we want to append ; at the end of the following lines:</p>
<div class="CodeRay">
  <div class="code"><pre>var element = $(this)
var tabName = element.data('tab')
var report  = element.data('report')</pre></div>
</div>

<p>We can visually select the 3 lines and type <strong>:normal A;</strong> or we can just select all lines in the file with <strong>%</strong> and execute the same command <strong>:%normal A;</strong>.</p>
<p>Next week we're coming with few more tips to improve your vimfu.</p>
  
