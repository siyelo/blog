
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Siyelo</title>
  <meta name="author" content="Siyelo">

  
  <meta name="description" content="21 Jun 2012 Rails 3 Upgrade Process (the Road From 2.3.14 to 3.2.6) &#8211;> Comments &#8211;> &#8211;> We&#8217;ve just upgraded an application &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.siyelo.com/page/7/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Siyelo" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-6353020-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body id="blog"   >
  <header role="banner"><header id="header">
  <div class="wrapper">
    <h1 class="left" id="logo_alt">
      <a href="http://www.siyelo.com/"><img title="Siyelo" src="http://siyelo.com/images/logo_siyelo.png" alt="Siyelo logo"></a>
    </h1>
    <ul class="right horizontal" id="contact">
      <li><a href="mailto:info@siyelo.com" title="Email us - we want to hear from you">info@siyelo.com</a></li>
      <li>
      <p>+27 21 461 2050</p>
      </li>
    </ul>
    <nav class="right" id="main_nav">
    <ul class="horizontal">
      <li><a href="http://www.siyelo.com">Home</a></li>
      <li><a href="http://www.siyelo.com/services">Services</a></li>
      <li><a href="http://www.siyelo.com/projects">Projects</a></li>
      <li><a href="http://www.siyelo.com/team">Team</a></li>
      <li><a href="/" class="active">Blog</a></li>
    </ul>
    </nav>
  </div>
</header>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.siyelo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div class="wrapper multiclouds">
  <div id="articles">
    
    
    
      <article>
        
  <header>
    















<section><time class="timestamp" datetime="2012-06-21T18:10:35+02:00" pubdate data-updated="true">
    <span class='day'> 21</span>
    <span class='month'> Jun</span>
    <span class='year'> 2012</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/rails-3-upgrade-process-the-road-from-2-3-14-to-3-2-6">Rails 3 Upgrade Process (the Road From 2.3.14 to 3.2.6)</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/rails-3-upgrade-process-the-road-from-2-3-14-to-3-2-6#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>We&#8217;ve just upgraded an application with about 20K LOC (Lines Of Code) from Rails 2.3.14 to Rails 3.2.6 and Ruby 1.8.7 to Ruby 1.9.3. Here we&#8217;ll share some details about the experience and the process we took for the upgrade. Before the upgrade, it&#8217;s advisable to migrate to the latest Rails 2.3 version (2.3.14).</p>

<h3>Versions running out of support&#8230;</h3>

<p>Why upgrade? Ruby 1.8.7 is slowly <a href="http://www.ruby-lang.org/en/news/2011/10/06/plans-for-1-8-7/">running out of support</a> and Ruby on Rails 2.3.x is already <a href="https://groups.google.com/forum/#!topic/rubyonrails-security/CdoMUVpsRmQ/discussion">out of maintenance and out of security support</a>. If wondering which Ruby on Rails version are supported at the moment, it&#8217;s 3.2 for bugfixes and 3.1 for security fixes (see this <a href="http://groups.google.com/group/rubyonrails-core/browse_thread/thread/30ff7f618a6428f3/a767ba1bbf526fde?q=#50a39e4694704f14">thread discussion</a> on rails-core mailing list). </p>

<h3>How to approach the upgrade&#8230;</h3>

<p>There are several schools of thought regarding this matter:</p>

<ul>
<li>Upgrade both your ruby version to 1.9.1+ and your stack to Rails stack simultaniously.</li>
<li>Upgrade your Rails stack and then upgrade your Ruby version</li>
<li>Upgrade your Ruby version and then your Rails stack</li>
</ul>


<p>We went with the first.</p>

<p>This was because although we have a relatively large application, we found that most of the gems being used were easily replaced and had no conflicts with Rails 3.x.</p>

<h3>Upgrade now&#8230;</h3>

<p>The upgrade process to Rails 3.x is rather straight forward as most of the gems have already been ported to support Rails 3.x and many and most have documentated how to do the change. In the rare case that one of your gems does not support rails 3, they are easily replaced.</p>

<p>Here is how we upgraded:</p>

<p>Start by installing the <a href="https://github.com/rails/rails_upgrade">rails_upgrade</a> plugin:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ruby script/plugin install git://github.com/rails/rails_upgrade.git
</span></code></pre></td></tr></table></div></figure>


<p>Then run the rake task that does a check for required upgrades:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rake rails:upgrade:check
</span></code></pre></td></tr></table></div></figure>


<p>The output is rather descriptive. It hightlights all the changes required and even links to blog posts for those of you who would like additional information on how to approach the changes.</p>

<p>Run the backup task. This backs up all of your routes, environments, application, etc.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rake rails:upgrade:backup
</span></code></pre></td></tr></table></div></figure>


<p>There is a rake task to upgrade all of your routes to the new DSL. We found that we needed to make minor changes after this task was run.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rake rails:upgrade:routes
</span></code></pre></td></tr></table></div></figure>


<p>Yet another rake task for generating a Gemfile from config.gem directives.</p>

<p>In Rails 3, bundler handles all your gems and dependencies (Fortunately our app was already using bundler). If yours isn&#8217;t the <a href="https://github.com/rails/rails_upgrade">rails_upgrade</a>  plugin is nice enough to do this for you!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rake rails:upgrade:gems
</span></code></pre></td></tr></table></div></figure>


<p>Now it&#8217;s just a matter of upgrading the Rails version ensuring that you have not locked any of the other gems at a version incompatible with your upgrade. Then let bundler do it&#8217;s thing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>bundle install
</span></code></pre></td></tr></table></div></figure>


<p>Then run all the generators for gems like rspec, cucumber and setup spork, guard.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rails g rspec:install --spork
</span><span class='line'>rails g cucumber:install --rspec --capybara --spork
</span><span class='line'>bundle <span class="nb">exec </span>guard init
</span><span class='line'>bundle <span class="nb">exec </span>guard init spork
</span></code></pre></td></tr></table></div></figure>


<p>If using cucumber and it&#8217;s old web steps, you&#8217;ll need to add <a href="https://github.com/cucumber/cucumber-rails-training-wheels">cucumber-rails-training-wheels</a>  to the Gemfile. It&#8217;s also good to setup the <a href="http://guides.rubyonrails.org/asset_pipeline.html">assets pipeline</a>  in order to get the full benefits from newest version of Rails.</p>

<p>From here we went about fixing our specs (aren&#8217;t they just fabulous?). We feel this is an important step as it will expose problems and give you deprecation warnings.</p>

<p>We didn&#8217;t go as far as to fix every spec and cuke. Just to the point where we felt comfortable upgrading again!</p>

<p>So we generated a new Rails 3.2.6 application in another folder and carefuly moved across the Rails configuration files (production.rb, development.rb, Rakefile, etc).</p>

<p>After some more bug and deprecation warning fixes we have a stable app once again! :)</p>

<p>Now all that&#8217;s left to do is clean up the old backup files, old rails scripts/* files and your vendor/plugins and you&#8217;re done!</p>

<p>Happy upgrades!</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time class="timestamp" datetime="2012-05-11T16:07:00+02:00" pubdate data-updated="true">
    <span class='day'> 11</span>
    <span class='month'> May</span>
    <span class='year'> 2012</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/were-hiring-social-media-marketing-intern">WE’RE HIRING! – SOCIAL MEDIA MARKETING INTERN</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/were-hiring-social-media-marketing-intern#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Siyelo is growing fast and we&#8217;re looking for a bright, hardworking individual to join our team as a Social Media Intern!</p>

<p>–</p>

<p><strong>Location</strong>: Cape Town, South Africa</p>

<p><strong>Start date</strong>: June 2012</p>

<p><strong>Duration</strong>: 8 to 12 weeks</p>

<p><strong>Funding</strong>: Expenses and reasonable honorarium</p>

<p><strong>Internship Description:</strong></p>

<p>Siyelo is a web design and development agency, consulting to a wide variety of clients and industries. You will work alongside our team to create engaging social content that inspires and motivates a passionate tech community. A successful intern will be able to learn fast, thrive on juggling a lot of tasks, enjoy tracking details; and has the ability to keep cool under deadlines.</p>

<p><strong>Skills &amp; Experience Required:</strong></p>

<ul>
<li><p>Energetic, independent, and detail-oriented.</p></li>
<li><p>Strong written and oral communication skills - in English</p></li>
<li><p>Available at least 16 to 24 hours a week.</p></li>
<li><p>Studying for or recently graduated with a degree in business, communication, social sciences, with good grades</p></li>
<li><p>Highly sociable and witty</p></li>
<li><p>Knowledge of HTML is a plus</p></li>
</ul>


<p><strong>Sample projects you will work on:</strong></p>

<ul>
<li><p>Support to all Marketing activities</p></li>
<li><p>Manage integrated social media campaigns.</p></li>
<li><p>Social strategy and overviews</p></li>
<li><p>Evaluate positioning and activity of competitors.</p></li>
<li><p>Take charge of managing posting and profile upkeep.</p></li>
<li><p>Identify opportunities for increased social interaction.</p></li>
<li><p>Research new social techniques, platforms and trends.</p></li>
<li><p>Testing new products</p></li>
</ul>


<p><strong>Benefits for Intern:</strong></p>

<ul>
<li><p>Siyelo offers an international, fast-paced and dynamic environment in hot web techologies.</p></li>
<li><p>A great office in central Cape Town. Open, creative and vibrant.</p></li>
<li><p>Ping-pong, putt-putt, and Playstation3.</p></li>
<li><p>Other fun things not beginning with the letter &#8216;P&#8217;.</p></li>
<li><p>Learn the basics of web technogies, product development and consulting.</p></li>
</ul>


<p><strong>Application procedure:</strong></p>

<p>Send application before May 20th 2012 to<a href="mailto:jobs@siyelo.com">jobs@siyelo.com</a> with a subject line of ”Social Media Marketing Internship application: <your name>”.</p>

<p>Please include;</p>

<ol>
<li><p>A brief explanation of who you are and how you would help us.</p></li>
<li><p>A copy of your CV</p></li>
<li><p>The time and dates you will be available to work at our office.</p></li>
</ol>

</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time class="timestamp" datetime="2011-12-30T12:41:00+02:00" pubdate data-updated="true">
    <span class='day'> 30</span>
    <span class='month'> Dec</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/intro-to-machine-learning-in-ruby">Intro to Machine Learning in Ruby</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/intro-to-machine-learning-in-ruby#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Machine learning is branch of <strong>A</strong>rtificial <strong>I</strong>ntelligence (AI) concerned with design and development of algorithms that allow computers to learn. It&#8217;s a very broad subject so we will just focus on a simple example that uses statistical classification.</p>

<h3>Let&#8217;s build&#8230;</h3>

<p>In this tutorial we are going to build a simple news classification application that will parse and classify RSS/HTML articles from the <a href="http://www.timeslive.co.za/">Times Live</a> newspaper.</p>

<p>For the job, we will use <strong>nokogiri</strong> gem and 2 ruby standard libraries: <strong>open-uri</strong> and <strong>rss/2.0</strong>.</p>

<h3>RSS Parser</h3>

<p>To find sources of articles for processing,  we could build a complex search engine or we can simply use the RSS feeds the newspaper provides us with to look for and discover links. <strong>RssParser</strong> class does exactly that, you initialize it with a <a href="http://avusa.feedsportal.com/c/33051/f/534658/index.rss">feed url</a> and it gives you back the links to all the articles discovered in that feed.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">RssParser</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:url</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@url</span> <span class="o">=</span> <span class="n">url</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">article_urls</span>
</span><span class='line'>    <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="kp">false</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span><span class="o">.</span><span class="n">link</span> <span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>HTML Parser</h3>

<p>Having article links, we need to parse page content and extract meaningful parts from these pages. <strong>HtmlParser</strong> class can be initialized with a page url and DOM selector. In this example we will be using a CSS selector to extract the content from articles - <a href="http://getfirebug.com/">Firebug</a> and <a href="http://jquery.com/">jQuery</a> were used to find the selector for the text we are extracting from the article. In this class you will also notice <strong>clean_whitespace</strong> method which cleans the whitespace characters from the extracted text.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">HtmlParser</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:url</span><span class="p">,</span> <span class="ss">:selector</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@url</span>      <span class="o">=</span> <span class="n">url</span>
</span><span class='line'>    <span class="vi">@selector</span> <span class="o">=</span> <span class="n">selector</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">content</span>
</span><span class='line'>    <span class="n">doc</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
</span><span class='line'>    <span class="n">html_elements</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html_elements</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">element</span><span class="o">|</span> <span class="n">clean_whitespace</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">clean_whitespace</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span class='line'>      <span class="n">text</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/\s{2,}|\t|\n/</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Statistical Classifier</h3>

<p>We introduce a class that is responsible for classification of articles. It is initialized with a hash that consists of categories (keys) and training data (values).</p>

<p>Training data is used to discoverpotential relationships between articles and categories. This data should be carefully selected in order to give better classification results. It is created by determining the value for each word in the context of all words for that category (see the <strong>train_data()</strong>method).</p>

<p>In this example we are usingcontent ofWikipedia articles for <a href="http://en.wikipedia.org/wiki/Economy">economy</a>, <a href="http://en.wikipedia.org/wiki/Sport">sport</a> and <a href="http://en.wikipedia.org/wiki/Health">health</a> as training data for ourcategories.</p>

<p>When classifying articles we want to compare only meaningful words and ignore other wordsthat do not add any value for a certain category. We (partially) solve this problem using <a href="https://gist.github.com/1534053">stop words</a>.</p>

<p>Finally, the <strong>scores()</strong> method creates the scores for each category (per text) that we are testing.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Classifier</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:training_sets</span><span class="p">,</span> <span class="ss">:noise_words</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@training_sets</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="n">filename</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">),</span> <span class="s1">&#39;stop_words.txt&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@noise_words</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:chomp</span><span class="p">)</span>
</span><span class='line'>    <span class="n">train_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">scores</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span class='line'>    <span class="n">words</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/[a-z]+/</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">scores</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="n">training_sets</span><span class="o">.</span><span class="n">each_pair</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="p">,</span> <span class="n">word_weights</span><span class="o">|</span>
</span><span class='line'>      <span class="n">scores</span><span class="o">[</span><span class="n">category</span><span class="o">]</span> <span class="o">=</span> <span class="n">score</span><span class="p">(</span><span class="n">word_weights</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">scores</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">train_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="n">data</span><span class="o">.</span><span class="n">each_pair</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="p">,</span> <span class="n">text</span><span class="o">|</span>
</span><span class='line'>      <span class="n">words</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/[a-z]+/</span><span class="p">)</span>
</span><span class='line'>      <span class="n">word_weights</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">words</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">word</span><span class="o">|</span> <span class="n">word_weights</span><span class="o">[</span><span class="n">word</span><span class="o">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">unless</span> <span class="n">noise_words</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">word</span><span class="p">)}</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">ratio</span> <span class="o">=</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="n">words</span><span class="o">.</span><span class="n">length</span>
</span><span class='line'>      <span class="n">word_weights</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">key</span><span class="o">|</span> <span class="n">word_weights</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">*=</span> <span class="n">ratio</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">training_sets</span><span class="o">[</span><span class="n">category</span><span class="o">]</span> <span class="o">=</span> <span class="n">word_weights</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">private</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="n">word_weights</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
</span><span class='line'>      <span class="n">score</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">acc</span><span class="p">,</span> <span class="n">word</span><span class="o">|</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">word_weights</span><span class="o">[</span><span class="n">word</span><span class="o">]</span><span class="p">}</span>
</span><span class='line'>      <span class="mi">1000</span><span class="o">.</span><span class="mi">0</span> <span class="o">*</span> <span class="n">score</span> <span class="o">/</span> <span class="n">words</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Lets have a go</h3>

<p>Here is the script that runs the program:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;nokogiri&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;rss/2.0&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># training data samples</span>
</span><span class='line'><span class="n">economy</span> <span class="o">=</span> <span class="no">HtmlParser</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;http://en.wikipedia.org/wiki/Economy&#39;</span><span class="p">,</span> <span class="s1">&#39;.mw-content-ltr&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">sport</span>   <span class="o">=</span> <span class="no">HtmlParser</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;http://en.wikipedia.org/wiki/Sport&#39;</span><span class="p">,</span> <span class="s1">&#39;.mw-content-ltr&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">health</span>  <span class="o">=</span> <span class="no">HtmlParser</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;http://en.wikipedia.org/wiki/Health&#39;</span><span class="p">,</span> <span class="s1">&#39;.mw-content-ltr&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">training_data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="ss">:economy</span> <span class="o">=&gt;</span> <span class="n">economy</span><span class="o">.</span><span class="n">content</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:sport</span> <span class="o">=&gt;</span> <span class="n">sport</span><span class="o">.</span><span class="n">content</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:health</span> <span class="o">=&gt;</span> <span class="n">health</span><span class="o">.</span><span class="n">content</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">classifier</span> <span class="o">=</span> <span class="no">Classifier</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">training_data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">results</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="ss">:economy</span> <span class="o">=&gt;</span> <span class="o">[]</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:sport</span> <span class="o">=&gt;</span> <span class="o">[]</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:health</span> <span class="o">=&gt;</span> <span class="o">[]</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">rss_parser</span> <span class="o">=</span> <span class="no">RssParser</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;http://avusa.feedsportal.com/c/33051/f/534658/index.rss&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">rss_parser</span><span class="o">.</span><span class="n">article_urls</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article_url</span><span class="o">|</span>
</span><span class='line'>  <span class="n">article</span> <span class="o">=</span> <span class="no">HtmlParser</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">article_url</span><span class="p">,</span> <span class="s1">&#39;#article .area &gt; h3, #article .area &gt; p, #article &gt; h3&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">scores</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">scores</span><span class="p">(</span><span class="n">article</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>  <span class="n">category_name</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">max_by</span><span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="p">}</span>
</span><span class='line'>  <span class="c1"># DEBUG info</span>
</span><span class='line'>  <span class="c1"># p &quot;category: #{category_name}, score: #{score}, scores: #{scores}, url: #{article_url}&quot;</span>
</span><span class='line'>  <span class="n">results</span><span class="o">[</span><span class="n">category_name</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">article_url</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="nb">p</span> <span class="n">results</span>
</span></code></pre></td></tr></table></div></figure>


<p>Although our statistical classification algorithm is very simple, it can give remarkably good results provided the training data is good. For even better results you can try other classification algorithms like <a href="http://en.wikipedia.org/wiki/Bayesian_probability">Bayesian probability</a>  and <a href="http://en.wikipedia.org/wiki/Latent_semantic_analysis">Latent Semantic Analysis</a>.</p>

<p>If you are interested in amore indepth exampleof a news aggregator application - you can check <a href="https://github.com/siyelo/newsagg">newsagg</a> at Github. It&#8217;s a simple Sinatra application with a Redis datastore that we put together. It crawls, classifies and creates &#8216;clusters&#8217; of articles using statistical algorithms.</p>

<p>If you want to learn more about Machine Learning, checkout <a href="http://shop.oreilly.com/product/9780596529321.do">Programming Collective Intelligence</a> book - code examples written in Python and <a href="http://www.apress.com/9781430223511">Scripting Intelligence</a> - code examples written in Ruby.</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time class="timestamp" datetime="2011-12-28T23:01:00+02:00" pubdate data-updated="true">
    <span class='day'> 28</span>
    <span class='month'> Dec</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/redis-in-the-nosql-ecosystem">Redis in the NoSQL Ecosystem</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/redis-in-the-nosql-ecosystem#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Redis (<strong>RE</strong>mote <strong>D</strong>Ictionary <strong>S</strong>erver) is key-value in-memory database storage that also supports disk storage for persistence. It supports several <a href="http://redis.io/topics/data-types-intro">data types</a>: Strings, Hashes, Lists, Sets and Sorted Sets; implements <a href="http://redis.io/topics/pubsub">publish/subscribe</a> messaging paradigm and has <a href="http://redis.io/topics/transactions">transactions</a>.</p>

<p>All these different options place Redis in the NoSQL ecosystem somewhere between simple caching systems like memcache and feature-heavy document databases like MongoDB and CouchDB. The question is: when do you pick Redis over other NoSQL systems?</p>

<h3>Give us some ACID</h3>

<p>Before going into the use-cases, let&#8217;s say one more important thing about Redis. Redis is single threaded which allows it to be <a href="http://en.wikipedia.org/wiki/ACID">ACID compliant</a> (Atomicity, Consistency, Isolation and Durability). Other <a href="http://nosql-database.org/">NoSQL databases</a> generally don&#8217;t provide ACID compliance, or they provide it partially. By default Redis trades some durability in return for speed (default <strong>fsync()</strong> is set to <strong>everysec</strong> which means it will save data to disk every second). But, because Redis is very configurable, you can change how many times it will fsync() the data on disk by using the <strong>appendfsync</strong> command (you can use <strong>appendfsync always</strong> and system will fsync data after every write - it&#8217;s slow but safest!).</p>

<h3>When to use Redis?</h3>

<p>In your production environment you don&#8217;t need to switch to Redis. You can just <a href="http://antirez.com/post/take-advantage-of-redis-adding-it-to-your-stack.html">use it for the new things</a> you are implementing. Always pick right tool for the job. For stable, predictable and relational data pick relational database. For temporary, highly dynamic data pick NoSQL database; schema changes can be a big problem and can take forever in big relational databases.</p>

<p>If you have a highly dynamic data that changes often, storage tends to grow quickly and further involves schema adjusting to store them, then Redis can be a potential good choice.</p>

<p>If you need a more featured document oriented database that allows you to perform <strong>range queries</strong>, <strong>regular expression searches</strong>, <strong>indexing</strong>, and <strong>MapReduce</strong> you should check <strong>MongoDB</strong>, <strong>CouchDB</strong> or similar. If you need a simple <strong>caching</strong> with better expiration algorhitms than Redis has then you should check <strong>memcache</strong>.</p>

<h3>Redis Use-Cases</h3>

<ul>
<li>Access Logger: When you need to log different activities, Redis is a good solution. Because Redis has to keep all stored objects in memory, don&#8217;t forget to archive data to relational/document database because it can grow quickly after some time.</li>
<li>Counting Downloads: <a href="https://github.com/rubygems/rubygems.org">Rubygems</a> uses Redis for counting downloads of gems. See how it&#8217;s implemented in the <a href="https://github.com/rubygems/rubygems.org/blob/master/app/models/download.rb">Download</a> model.</li>
<li>High Score tables: Redis supports data type functions that can be very <a href="http://blog.agoragames.com/blog/2011/01/01/creating-high-score-tables-leaderboards-using-redis/">handy</a>.</li>
<li>Who&#8217;s Online: Use Redis to implement <a href="http://www.lukemelia.com/blog/archives/2010/01/17/redis-in-practice-whos-online/">who is online</a> logic in your application.</li>
<li>Caching: Finding followings, followers or similar is very expensive operation in relational databases, use Redis to cache these data.</li>
<li>Queues: <a href="https://github.com/defunkt/resque">Resque</a> is a Redis-backed Ruby library for creating background jobs, placing them on multiple queues, and processing them later.</li>
<li>Live debugging: You need to do live debugging or roll out new features for production testing for specific users only - <a href="https://github.com/jamesgolick/rollout">Rollout</a> gem does exactly that.</li>
<li>HN style social news site written in Ruby/Sinatra/Redis/jQuery - <a href="https://github.com/antirez/lamernews">lamernews</a>.</li>
</ul>


<h3>Redis console</h3>

<p>You can use redis-cli to connect to a local or remote Redis server and call com-mands. Here is an example (first connect to the server using: redis-cli -p 6379):</p>

<h3>Redis from Ruby</h3>

<p>Here is an example using Ruby to execute commands on Redis server. You need to install <a href="https://github.com/ezmobius/redis-rb">redis gem</a> by executing<em>gem install redis</em>first.</p>

<p>Learn more about Redis <a href="http://redis.io/commands">commands</a> and give some speed to your web applications for free.</p>

<h3>Real world Redis example</h3>

<p>At the end, lets show a real world example how Redis is used in <a href="http://rubygems.org/">Rubygems</a> for caching gem downloads count. For keeping the code snippet short some code is ommited and/or simplified.</p>

<p>First, in the initializer a new redis object as a global variable <strong>$redis</strong> is instantiated. This object is used in Download model for updating the downloads count for a gem with <strong>self.incr(name)</strong> method and reading the downloads count for a gem with <strong>self.for_rubygem(name)</strong> method. Rubygems is using Sinatra application <strong>Hostess</strong> to speed up gem downloads. Sinatra application is registered as a  middleware in the application.rb config file. This application  defines <strong>get &#8220;/gems/*.gem&#8221;</strong> route which triggers the downloads count to be updated in the Redis database.</p>

<p>Rubygems is doing more download stats like: total downloads, downloads per gem, downloads for a specific gem version, etc. Check out the source code at <a href="https://github.com/rubygems/rubygems.org">Github</a> for more details.</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time class="timestamp" datetime="2011-12-14T11:51:00+02:00" pubdate data-updated="true">
    <span class='day'> 14</span>
    <span class='month'> Dec</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/jquery-mobile-overview">jQuery Mobile Overview</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/jquery-mobile-overview#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>We&#8217;ve all heard it, the browser is the future for the mobile  applications. Mobile web frameworks are getting a lot of traction  lately. Is this the turning point where these frameworks will finally  set the developers free from the walled garden model of the Apple App  Store and the complexity and resources needed for developing and  maintaining a separate code base for each platform out there?</p>

<p>It&#8217;s been almost a month since the 1.0 stable release of <a href="http://jquerymobile.com/">jQuery Mobile</a> , the touch optimized mobile web framework. Only a year after John Resig announced the project in its first alpha stage, the jQuery team managed to deliver a solid release with an impressive <a href="http://jquerymobile.com/gbs/">graded support</a> for a wide range of mobile browsers and platforms.</p>

<p>Built upon the jQuery core and the jQuery UI, the framework aims to deliver a quick and easy way to build unified cross-platform HTML5 based user interfaces with a single code base. All you need to start building applications using the framework is knowledge of some JavaScript and some HTML5.</p>

<p>Building a mobile application with jQuery Mobile is extremely easy and fast</p>

<p>One of the biggest advantages of jQuery Mobile is that even as a newcomer to the framework you can develop a rough version of your application in a matter of days as opposed to the native application development for Android and iOS where the learning curve is not quite as steep.</p>

<p>To make your application mobile just include the jQuery Mobile files in your header:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-1.6.4.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add the data attributes to your HTML markup:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">data-role=</span><span class="s">&quot;page&quot;</span> <span class="na">data-theme=</span><span class="s">&quot;e&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">data-role=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;h1&gt;</span>My Title<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>     <span class="nt">&lt;div</span> <span class="na">data-role=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;ul</span> <span class="na">data-role=</span><span class="s">&quot;listview&quot;</span> <span class="na">data-inset=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;li&gt;</span>Page 1<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;li&gt;</span>Page 2<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;li&gt;</span>jQuery Mobile<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>     <span class="nt">&lt;div</span> <span class="na">data-role=</span><span class="s">&quot;footer&quot;</span> <span class="na">data-position=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;h4&gt;</span>Footer<span class="nt">&lt;/h4&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And this is the result:</p>

<p><img src="/images/old/2011/12/34522551610-orig.png" alt="34522551610-orig" /></p>

<p>The framework takes care of applying the styles and positioning the elements to fit and scale nicely on any device. With just a couple of html lines we have a template for our mobile application. Off course you can add your custom css styles to tweak the looks to your desires. Also with the release of the 1.0 support for the <a href="http://jquerymobile.com/blog/2011/10/28/announcing-themeroller-for-mobile-beta/">ThemeRoller</a> tool has been added, so quickly theming your application is a breeze.</p>

<p>The important part in the html snippet above are the HTML5 data-* attributes. The framework relies on these data attributes in order to do it&#8217;s magic. Older browser will ignore this attributes and just render the regular html. Basically the layout of a jQuery Mobile application is defined by the data-role attribute. In the above example we can see that we have a divs with data-roles &#8220;header&#8221;, &#8220;content&#8221; and &#8220;footer&#8221; all of which belong to the main page wrapper. Also we added a data-role on the list element in order for the framework to “widgetize” it.</p>

<p>By default, linking to other pages is automatically done via Ajax in a single-page model. All you need to do is define a standard links and the framework will take care of it. If the device doesn&#8217;t support Ajax for some reason the framework falls back to standard http requests. Another cool feature of the framework is linking within a multi-page document. A single page can contain many page containers defined by the data-role of “page” which means immediate display of the clicked page. When using this techniques combined with the page transition effects, the user experience feels almost “native app” like.</p>

<h3>Web vs Native</h3>

<p>Currently the biggest argument being used against the wider adoption of the mobile web applications is the limited access to the client device features. A common example to address this issue is combining the framework with tools like <a href="http://phonegap.com/">PhoneGap</a> and delivering the application as native. Combining the framework with tools like PhoneGap also minimizes the lower performance issues since all of the resources can be loaded from the device.</p>

<p>Hopefully we will see a quick adoption of the proposed <a href="https://wiki.mozilla.org/WebAPI">WebAPI</a> specifications by Mozilla that define a standard of APIs that would give the browser high level access to the device components like GPS api, filesystem api, accelerometer api, dialer, messaging etc.</p>

<h3>Conclusion</h3>

<p>While all of those features provided by the jQuery Mobile framework are really cool and exciting, does the framework really provides a mature native-like feel and functionality to the applications built with it?</p>

<p>The jQuery team have done a great job by providing a nicely packed framework with lots of features like progressive enhancement approach, theming framework, unified widgets, modular design, a great cross-browser compatibility, even for older and less capable browsers and devices. But there is much left to be desired in the performance area. Even when trying the simple examples on a high end devices the page transition effects and the general user flow feels a little clunky. This is the area that jQuery Mobile fails short when compared to the native applications and even other Mobile Application frameworks (<a href="http://jqtouch.com/">jQTouch</a> or <a href="http://www.sencha.com/">Sencha</a> ) but it probably be fixed in near future with the polishing of the rough edges.</p>
</div></div>
  
  


      </article>
    
    <div class="pagination">
      
        <a class="prev" href="/page/8/">Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/page/6/">Newer</a>
      
    </div>
  </div>
  <aside class="sidebar">
    
      <section>
  <h1>About</h1>
  <ul id="about">
    <li>
      <p>Siyelo is a web development consultancy based in South Africa
      and Macedonia. We create bespoke web and mobile apps. Interested
      in working with us? <a href='mailto:info@siyelo.com'>Contact us</a>
      anytime.</p>
    </li>
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <p class="on-github"><a href="https://github.com/siyelo">@siyelo</a> on GitHub</p>
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'siyelo',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("siyelo", 3, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/siyelo" class="twitter-follow-button" data-show-count="false">Follow @siyelo</a>
  
</section>


    
  </aside>
</div>

  <footer role="contentinfo"><footer id="footer">
    <div class="wrapper">
      <ul class="clearfix">
        <li class="fourth">
          <a title="Email us - we want to hear from you" class="marker" href="mailto:info@siyelo.com">@</a>
          <span>Contact</span>
          <ul>
            <li>phone</li>
            <li>+27214612050</li>
            <li>email:</li>
            <li>
              <a title="Email us - we want to hear from you" href="mailto:info@siyelo.com">info@siyelo.com</a>
            </li>
          </ul>
        </li>
        <li class="fourth">
          <a title="Siyelo office in Cape Town" class="marker" target="_blank" href="http://g.co/maps/7xbpg">A</a>
          <span>Cape Town</span>
          <ul>
            <li>Suite #1, 4th Floor</li>
            <li>79 Roeland Street</li>
            <li>Cape Town, 8001</li>
            <li>South Africa</li>
          </ul>
        </li>
        <li class="fourth">
          <a title="Siyelo office in Skopje" class="marker" target="_blank" href="http://g.co/maps/ssf42">B</a>
          <span>Skopje</span>
          <ul>
            <li>Suite #5, 1st Floor</li>
            <li>Marx &amp; Engels 7</li>
            <li>Skopje</li>
            <li>Macedonia</li>
          </ul>
        </li>
        <li class="fourth social">
          <a title="Siyelo on Twitter" href="http://twitter.com/#!/siyelo"><img alt="Siyelo on Twitter" src="http://siyelo.com/images/icons/twitter.png"></a>
          <a title="Siyelo on Github" href="http://github.com/siyelo"><img alt="Siyelo on Github" src="http://siyelo.com/images/icons/github.png"></a>
          <a title="Siyelo blog RSS feed" href="http://blog.siyelo.com/rss.xml"><img alt="Siyelo blog RSS feed" src="http://siyelo.com/images/icons/rss.png"></a>
        </li>
      </ul>
      <aside>
        <a class="left back_to_top" href="#header">Back to top</a>
        <div class="right">
          <a title="Creative Commons - some rights reserved" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
        </div>
      </aside>
    </div>
  </footer>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'siyelo';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
