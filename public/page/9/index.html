
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Siyelo</title>
  <meta name="author" content="Siyelo">

  
  <meta name="description" content="19 Feb 2010 Siyelo @ Sortfolio &#8211;> Comments &#8211;> &#8211;> Visit our new profile at Sortfolio. http://sortfolio.com/company/6148-siyelo 19 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.siyelo.com/page/9/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Siyelo" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4054156-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body id="blog"   >
  <header role="banner"><header id="header">
  <div class="wrapper">
    <h1 class="left" id="logo_alt">
      <a href="http://www.siyelo.com/"><img title="Siyelo" src="http://www.siyelo.com/images/logo_siyelo.png" alt="Siyelo logo"></a>
    </h1>
    <ul class="right horizontal" id="contact">
      <li><a href="mailto:info@siyelo.com" title="Email us - we want to hear from you">info@siyelo.com</a></li>
      <li>
      <p>+27 21 461 2050</p>
      </li>
    </ul>
    <nav class="right" id="main_nav">
    <ul class="horizontal">
      <li><a href="http://www.siyelo.com">Home</a></li>
      <li><a href="http://www.siyelo.com/services">Services</a></li>
      <li><a href="http://www.siyelo.com/projects">Projects</a></li>
      <li><a href="http://www.siyelo.com/team">Team</a></li>
      <li><a href="/" class="active">Blog</a></li>
    </ul>
    </nav>
  </div>
</header>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.siyelo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div class="wrapper multiclouds">
  <div id="articles">
    
    
    
      <article>
        
  <header>
    















<section><time datetime="2010-02-19T17:08:00+01:00" pubdate data-updated="true">
    <span class='day'> 19</span>
    <span class='month'> Feb</span>
    <span class='year'> 2010</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/siyelo-sortfolio">Siyelo @ Sortfolio</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/siyelo-sortfolio#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Visit our new profile at Sortfolio.</p>

<p><a href="http://sortfolio.com/company/6148-siyelo">http://sortfolio.com/company/6148-siyelo</a></p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2010-02-19T14:56:23+01:00" pubdate data-updated="true">
    <span class='day'> 19</span>
    <span class='month'> Feb</span>
    <span class='year'> 2010</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/the-least-you-can-do-on-usability">&#8216;The Least You Can Do&#8217; on Usability</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/the-least-you-can-do-on-usability#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Steve Krug nails usability testing with a practical and cost effective approach.</p>

<p><a href="http://blip.tv/file/1557737/">http://blip.tv/file/1557737/</a></p>

<p>Plus there&#8217;s some helpful resources on <a href="http://sensible.com/">his website</a>.</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2010-02-18T15:26:00+01:00" pubdate data-updated="true">
    <span class='day'> 18</span>
    <span class='month'> Feb</span>
    <span class='year'> 2010</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/rails-2-3devise-changing-your-email-content-type">Rails 2.3/Devise : Changing Your Email Content Type.</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/rails-2-3devise-changing-your-email-content-type#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Devise is a great rails authentication solution, with a very active mailing list and team of contributors. Given its modular, pluggable design, simple installation, I predict it will become the &#8220;standard&#8221; authentication module, (assuming someone steps up to the plate for MongoMapper/DataMapper support for Rails 3, anyone?).</p>

<p>A minor issue on Rails 2.3 is that Devise (v1.0) doesn&#8217;t allow you to override the content_type of the emails it sends. (I believe its fixed for Rails 3.0). Given the content type defaults to &#8216;text/html&#8217;, unless you like to cause yourself (and your users) some grief with html emails, and plain text emails will suffice, then read on.</p>

<p>I&#8217;ve patched Devise 1.0 to enable you to override this default behaviour in your config/initializers/devise.rb file</p>

<p>UPDATE: Its been merged into Devise v1.0.2</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Devise</span><span class="o">.</span><span class="n">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'><span class="err">    </span><span class="c1">#...    </span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">mailer_content_type</span> <span class="o">=</span> <span class="s1">&#39;text/plain&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The gem on gemcutter</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="n">install</span> <span class="n">glennr</span><span class="o">-</span><span class="n">devise</span>
</span></code></pre></td></tr></table></div></figure>


<p>or</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">&#39;glennr-devise&#39;</span><span class="p">,</span> <span class="ss">:lib</span> <span class="o">=&gt;</span> <span class="s1">&#39;devise&#39;</span><span class="p">,</span> <span class="ss">:source</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://gemcutter.org&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The github branch is here, and should be merged into the Devise trunk shortly: <a href="http://github.com/glennr/devise">http://github.com/glennr/devise</a>.</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2010-02-11T14:28:51+01:00" pubdate data-updated="true">
    <span class='day'> 11</span>
    <span class='month'> Feb</span>
    <span class='year'> 2010</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/using-devise-for-authentication-how-to-upgrade-from-v0-8-2-to-v1-0">Using Devise for Authentication? How to Upgrade From v0.8.2 to v1.0</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/using-devise-for-authentication-how-to-upgrade-from-v0-8-2-to-v1-0#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>We&#8217;re using PlataformaTec&#8217;s fantastic Devise for user authentication in our Rails projects, despite being long-standing supporters of Authlogic for a long time. We found Devise to be far easier to set up and you get great stuff right out of the box, the automatic authentication emails, password reset forms, and very simple to configure authentication strategies to name a few.</p>

<p>It also works great with Declarative_Authorization (if you are masochistic enough to use Declarative_Authorization in the first place).</p>

<p>On to the topic of todays insightful blog post: upgrading from 0.8.2 to v1.0. Jose, the big-man-on-campus @ Plataforma tells us we should upgrade cos of a few significant bugs. Ok, lets do this.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">&#39;devise&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>becomes</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">&#39;devise&#39;</span><span class="p">,</span> <span class="ss">:version</span> <span class="o">=&gt;</span> <span class="s1">&#39;&gt;=1.0.0&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And after restarting the server, a barf.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">ActionView</span><span class="o">::</span><span class="no">TemplateError</span> <span class="p">(</span><span class="n">undefined</span> <span class="n">local</span> <span class="n">variable</span> <span class="ow">or</span> <span class="nb">method</span> <span class="sb">`new_user_session_path&#39; for #&lt;ActionView::Base:0x243fca4&gt;) on line #27 of app/views/shared/_header.html.haml: 24: 25: - else 26: %li= link_to &quot;Join&quot;, join_url 27: %li= link_to &quot;Sign In&quot;, new_user_session_path</span>
</span></code></pre></td></tr></table></div></figure>


<p>So obviously my Devise resource, User in this case, is fubar.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">devise</span> <span class="ss">:all</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hmm nothing changed there. But wait, <code>devise :all</code> is now conspicuously missing from the README, replaced by a more explicit statement of your authentication strategies in your model.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">devise</span> <span class="ss">:authenticatable</span><span class="p">,</span> <span class="ss">:confirmable</span><span class="p">,</span> <span class="ss">:recoverable</span><span class="p">,</span> <span class="ss">:rememberable</span><span class="p">,</span> <span class="ss">:trackable</span><span class="p">,</span> <span class="ss">:validatable</span>
</span></code></pre></td></tr></table></div></figure>


<p>So it seems though that the old Devise way of defining :all strategies is no longer supported. Fix that, and the order of the universe improves a little.</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2010-01-28T15:07:00+01:00" pubdate data-updated="true">
    <span class='day'> 28</span>
    <span class='month'> Jan</span>
    <span class='year'> 2010</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/paperclip-attachment-validations">Paperclip - Attachment Validations</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/paperclip-attachment-validations#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Using Paperclip, if you need to check if your model has an attachment, you don&#8217;t use the standard ActiveRecord validation helper i.e.;</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">validates_presence_of</span> <span class="ss">:logo</span>
</span></code></pre></td></tr></table></div></figure>


<p>Erroneous!</p>

<p>Instead you use Paperclip&#8217;s helper</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">validates_attachment_presence</span> <span class="ss">:logo</span>
</span></code></pre></td></tr></table></div></figure>


<p>But be sure to put that <strong>after your attachment definition</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">has_attached_file</span> <span class="ss">:logo</span>
</span><span class='line'><span class="n">validates_attachment_presence</span> <span class="ss">:logo</span>
</span></code></pre></td></tr></table></div></figure>


<p>And if you&#8217;re doing something tricky, like allowing your model to be saved without an attachment first, but enforcing that an attachment is present on update then; </p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">validates_attachment_presence</span> <span class="ss">:logo</span><span class="p">,</span> <span class="ss">:unless</span> <span class="o">=&gt;</span> <span class="ss">:new_record?</span>
</span></code></pre></td></tr></table></div></figure>



</div></div>
  
  


      </article>
    
    <div class="pagination">
      
        <a class="prev" href="/page/10/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/page/8/">Newer &rarr;</a>
      
    </div>
  </div>
  <aside class="sidebar">
    
      <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/siyelo-drinkup-skopje">Siyelo Drinkup: Skopje</a>
      </li>
    
      <li class="post">
        <a href="/were-hiring-experienced-web-developer">We&#8217;re Hiring - Experienced Web Developer</a>
      </li>
    
      <li class="post">
        <a href="/scratching-an-itch">Scratching an itch</a>
      </li>
    
      <li class="post">
        <a href="/rails-deployment-audit">Rails Deployment Audit</a>
      </li>
    
      <li class="post">
        <a href="/vim-tips-part-ii">Vim Tips - Part II</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <p class="on-github"><a href="https://github.com/siyelo">@siyelo</a> on GitHub</p>
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'siyelo',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("siyelo", 3, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/siyelo" class="twitter-follow-button" data-show-count="false">Follow @siyelo</a>
  
</section>





    
  </aside>
</div>

  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Siyelo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'siyelo';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
