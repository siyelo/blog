
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Siyelo</title>
  <meta name="author" content="Siyelo">

  
  <meta name="description" content="04 Oct 2011 Koding in Khayelitsha - Great Photo &#8211;> Comments &#8211;> &#8211;> A great photo from the programming class @glennrob is involved &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.siyelo.com/page/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Siyelo" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4054156-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body id="blog"   >
  <header role="banner"><header id="header">
  <div class="wrapper">
    <h1 class="left" id="logo_alt">
      <a href="http://www.siyelo.com/"><img title="Siyelo" src="http://www.siyelo.com/images/logo_siyelo.png" alt="Siyelo logo"></a>
    </h1>
    <ul class="right horizontal" id="contact">
      <li><a href="mailto:info@siyelo.com" title="Email us - we want to hear from you">info@siyelo.com</a></li>
      <li>
      <p>+27 21 461 2050</p>
      </li>
    </ul>
    <nav class="right" id="main_nav">
    <ul class="horizontal">
      <li><a href="http://www.siyelo.com">Home</a></li>
      <li><a href="http://www.siyelo.com/services">Services</a></li>
      <li><a href="http://www.siyelo.com/projects">Projects</a></li>
      <li><a href="http://www.siyelo.com/team">Team</a></li>
      <li><a href="/" class="active">Blog</a></li>
    </ul>
    </nav>
  </div>
</header>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.siyelo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div class="wrapper multiclouds">
  <div id="articles">
    
    
    
      <article>
        
  <header>
    















<section><time datetime="2011-10-04T14:45:00+02:00" pubdate data-updated="true">
    <span class='day'> 04</span>
    <span class='month'> Oct</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/koding-in-khayelitsha-great-photo">Koding in Khayelitsha - Great Photo</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/koding-in-khayelitsha-great-photo#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>A great photo from the programming class @glennrob is involved with.</p>

<p>(they&#8217;re learning ruby)</p>

<p><a href="/images/old/2011/10/koding_in_khayelitsha-scaled-1000.jpg"><img src="/images/old/2011/10/koding_in_khayelitsha-scaled-1000.jpg" alt="Koding_in_khayelitsha" /> </a></p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2011-09-23T12:11:28+02:00" pubdate data-updated="true">
    <span class='day'> 23</span>
    <span class='month'> Sep</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/siyelo-office-graffiti-stop-motion-video">Siyelo Office Graffiti: Stop-motion Video</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/siyelo-office-graffiti-stop-motion-video#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><iframe src="http://player.vimeo.com/video/29374463?portrait=0" frameborder="0" height="283" width="500"></iframe>

</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2011-09-08T20:46:00+02:00" pubdate data-updated="true">
    <span class='day'> 08</span>
    <span class='month'> Sep</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/installing-a-gem-in-all-your-global-rvm-gemsets">Installing a Gem in All Your Global RVM Gemsets</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/installing-a-gem-in-all-your-global-rvm-gemsets#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>Across different projects like us, you probably have a lot of development gems you like to use.Â E.g. we like;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;annotate&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;awesome_print&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s2">&quot;ap&quot;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;heroku&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;= 2.1.2&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;hirb&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;interactive_editor&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;open_gem&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rails-footnotes&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;ruby-debug&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;sketches&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;slurper&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="kp">false</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;taps&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;wirble&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>but obviously it&#8217;s a PITA (Pain In The ****) to add this gem spec to all your projects.</p>

<p>So, give this a shot;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">for </span>x in <span class="k">$(</span>rvm list strings<span class="k">)</span>; <span class="k">do </span>rvm use <span class="nv">$x</span>@global <span class="o">&amp;&amp;</span> gem install &lt;RAD DEVELOPMENT GEM NAME&gt;; <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<p>This installs a specific gem into all your global RVM gemsets. For great justice!</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2011-08-01T00:48:00+02:00" pubdate data-updated="true">
    <span class='day'> 01</span>
    <span class='month'> Aug</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/how-to-bulk-delete-remote-git-tags">How to Bulk Delete Remote Git Tags</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/how-to-bulk-delete-remote-git-tags#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>project had a lot of old, unwanted pre-release branch tags in our remote git repo. E.g.:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>0.9.6c
</span><span class='line'>0.9.6d
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>I needed a one-liner to find all these prerelease tags (i.e.Â all tags that end in a letter), that deletes them on the remote repo. Then I could do the same on my local.</p>

<p>Given that &#8220;git ls-remote&#8221; gives output like &#8221;<SHA> Â  Â refs/tags/<tag>&#8221;. E.g.:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>d16aeb86430afc26fb17f182f567d39c8c732188 refs/tags/0.9.6c
</span><span class='line'>390c9a3251b813775ccdb96c375d50fed67d058f refs/tags/0.9.6d
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>With a bit of awk and regexp love, we can match that output with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>^<span class="o">(</span>.*<span class="o">)</span>  -  the SHA <span class="o">(</span>at the start of the line ^<span class="o">)</span>
</span><span class='line'><span class="o">(</span><span class="se">\s</span>+<span class="o">)</span>  - a cupla spaces
</span><span class='line'><span class="o">(</span>.*<span class="o">[</span>a-z<span class="o">])</span><span class="nv">$ </span> - a string ending in a letter, followed by end of line <span class="o">(</span><span class="nv">$)</span>  <span class="o">(</span>there are more exact/safer ways of doing this regexp, I know<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>And we know that to delete a git tag on a remote you use:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git push origin :refs/tags/0.9.6c
</span></code></pre></td></tr></table></div></figure>


<p>So putting it all together we get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git ls-remote --tags origin | awk <span class="s1">&#39;/^(.*)(\s+)(.*[a-z])$/ {print &quot;:&quot; $2}&#39;</span> | xargs git push origin
</span></code></pre></td></tr></table></div></figure>


<p>(EDIT: thanks to @jamesconroyfinn for spotting the missing xargs)</p>

<p>Booyaka.</p>

<p>NOTE: execute that above command with extreme predjudice, er I mean, caution. i.e.;></p>

<blockquote><p>a) make sure you have the tags backed up in your local repo first andÂ <br />
b) check the output of the awk command first&#8230; (everything before &#8220;| xargs &#8230;&#8221; )</p></blockquote>

<p>Once you&#8217;ve done a dry-run or two, run that command and watch as those pesky remote tags get deleted.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>- <span class="o">[</span>deleted<span class="o">]</span>         0.9.6c
</span><span class='line'>- <span class="o">[</span>deleted<span class="o">]</span>         0.9.6d
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>Similarly for removing these pre-release tags from a local git repo:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git tag -l | awk <span class="s1">&#39;/^(.*[a-z])$/ {print $1}&#39;</span>  | xargs git tag -d
</span><span class='line'>
</span><span class='line'>Deleted tag <span class="s1">&#39;0.9.0c&#39;</span> <span class="o">(</span>was e373098<span class="o">)</span>
</span><span class='line'>Deleted tag <span class="s1">&#39;0.9.0d&#39;</span> <span class="o">(</span>was 5566b43<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>(This command is a lot easier to figure out since the output from &#8220;git tag -l&#8221; is simpler.Â Alternatively, for synchronization, if you don&#8217;t have any specific local tags, and are confident that remote has the tags you care about, it may be easier to wipe out all tags and pull them all from origin again.)</p>

<p>Final step: Profit</p>
</div></div>
  
  


      </article>
    
    
      <article>
        
  <header>
    















<section><time datetime="2011-07-27T15:08:00+02:00" pubdate data-updated="true">
    <span class='day'> 27</span>
    <span class='month'> Jul</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title"><a href="/cant-drop-your-heroku-database">Can&#8217;t Drop Your Heroku Database?</a></h1>
    
    <!--  -->
    <!--   <p class="meta"> &#8211;>
    <!--      -->
    <!--      | <a href="/cant-drop-your-heroku-database#disqus_thread">Comments</a> &#8211;>
    <!--      -->
    <!--   </p> &#8211;>
    <!--  -->
  </header>


  <div class="body"><div class="inner"><p>If you&#8217;re trying to drop your database on Heroku, and it&#8217;s not working, be sure you put it in maintenance mode first. i.e.</p>

<h3>Step 1</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>heroku maintenance:on --app
</span></code></pre></td></tr></table></div></figure>


<h3>Step 2</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>heroku pg:reset SHARED_DATABASE --app
</span></code></pre></td></tr></table></div></figure>


<h3>Step 3</h3>

<p>???</p>

<h3>Step 4</h3>

<h3>Profit</h3>
</div></div>
  
  


      </article>
    
    <div class="pagination">
      
        <a class="prev" href="/page/5/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/page/3/">Newer &rarr;</a>
      
    </div>
  </div>
  <aside class="sidebar">
    
      <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/siyelo-drinkup-skopje">Siyelo Drinkup: Skopje</a>
      </li>
    
      <li class="post">
        <a href="/were-hiring-experienced-web-developer">We&#8217;re Hiring - Experienced Web Developer</a>
      </li>
    
      <li class="post">
        <a href="/scratching-an-itch">Scratching an itch</a>
      </li>
    
      <li class="post">
        <a href="/rails-deployment-audit">Rails Deployment Audit</a>
      </li>
    
      <li class="post">
        <a href="/vim-tips-part-ii">Vim Tips - Part II</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/siyelo">@siyelo</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'siyelo',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("siyelo", 3, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/siyelo" class="twitter-follow-button" data-show-count="false">Follow @siyelo</a>
  
</section>





    
  </aside>
</div>

  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Siyelo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'siyelo';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
