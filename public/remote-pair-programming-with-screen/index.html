
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Remote pair-programming with Screen - Siyelo</title>
  <meta name="author" content="Siyelo">

  
  <meta name="description" content="At Siyelo we have 2 distributed teams, one in Cape Town and another one in Skopje. Naturally, we had to figure out how to do remote pair programming &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.siyelo.com/remote-pair-programming-with-screen">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Siyelo" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4054156-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body id="blog"   >
  <header role="banner"><header id="header">
  <div class="wrapper">
    <h1 class="left" id="logo_alt">
      <a href="http://www.siyelo.com/"><img title="Siyelo" src="http://siyelo.com/images/logo_siyelo.png" alt="Siyelo logo"></a>
    </h1>
    <ul class="right horizontal" id="contact">
      <li><a href="mailto:info@siyelo.com" title="Email us - we want to hear from you">info@siyelo.com</a></li>
      <li>
      <p>+27 21 461 2050</p>
      </li>
    </ul>
    <nav class="right" id="main_nav">
    <ul class="horizontal">
      <li><a href="http://www.siyelo.com">Home</a></li>
      <li><a href="http://www.siyelo.com/services">Services</a></li>
      <li><a href="http://www.siyelo.com/projects">Projects</a></li>
      <li><a href="http://www.siyelo.com/team">Team</a></li>
      <li><a href="/" class="active">Blog</a></li>
    </ul>
    </nav>
  </div>
</header>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.siyelo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div class="wrapper multiclouds">
  <div id="articles">

    <article class="hentry" role="article" class="post clearfix">
      
  <header>
    















<section><time class="timestamp" datetime="2011-11-03T10:37:00+02:00" pubdate data-updated="true">
    <span class='day'> 03</span>
    <span class='month'> Nov</span>
    <span class='year'> 2011</span>
  </time></section>
    
      <h1 class="entry-title">Remote Pair-programming With Screen</h1>
    
    <!--  -->
    <!--   <p class="meta"> -->
    <!--      -->
    <!--      | <a href="#disqus_thread">Comments</a> -->
    <!--      -->
    <!--   </p> -->
    <!--  -->
  </header>


<div class="entry-content"><p>At Siyelo we have 2 distributed teams, one in Cape Town and another one in Skopje. Naturally, we had to figure out how to do remote pair programming between the two offices. There are different available options for remote pair-programming (a great summary post available <a href="http://evan.tiggerpalace.com/articles/2011/10/17/some-people-call-me-the-remote-pairing-guy-/">here</a>).</p>

<p>In the past, we often used Skype for screen sharing, but the problems with Skype are:</p>

<ul>
<li>you don&#8217;t have control over the other screen</li>
<li>you cannot have both screen sharing and video</li>
<li>bandwidth of the internet connection sometimes can be a problem</li>
<li>it&#8217;s not a tool for pair programming</li>
</ul>


<p>Recently we have been experimenting with Google+ hangouts and although it has the same limitations, we prefer it over Skype for audio/video communication. But, what we really want from a remote pair-programming tool is the ability to do real time code collaboration.</p>

<p>The solution: <a href="http://www.gnu.org/s/screen/">screen</a>. Screen can have many useful scenarios, but here I will focus on following two:</p>

<ul>
<li>read only - useful as a screen sharing tool by hosting read only screen session</li>
<li>permissive - useful as a real time code collaboration tool</li>
</ul>


<p>Here is how to setup screen for both scenarios. Note: A downside of a tool like Screen is that everyone needs to learn an editor that runs in terminal. Luckily we all like vim.</p>

<p>First we need to install SSH server because all communication will happen over secure channel:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install ssh
</span></code></pre></td></tr></table></div></figure>


<p>For the read only scenario, we need to setup guest user account on the host machine. For security reasons we will create a read-only account with <a href="http://man.he.net/man1/rbash">rbash</a> (<a href="http://www.cyberciti.biz/faq/restrict-linux-users-to-their-home-directories-only/">restricted</a> bash) shell which will be used by the programmer we want to pair with to ssh into the host  machine we control and join the screen session.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo useradd -s /bin/rbash guest
</span><span class='line'>sudo passwd guest
</span><span class='line'>sudo mkdir /home/guest
</span></code></pre></td></tr></table></div></figure>


<p>Next we need to setup the guest shell.profile. Add the following to /home/guest/.profile</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">trap</span> <span class="s2">&quot;&quot;</span> 2 3 19 <span class="c"># stop user getting to shell</span>
</span><span class='line'>clear
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Welcome to pair-programming session&quot;</span>
</span><span class='line'><span class="nb">echo</span> -n <span class="s2">&quot;Press Enter to continue...&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">read</span>
</span><span class='line'>screen -x dalibor/pairprog
</span><span class='line'><span class="nb">exit</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here as you can notice &#8220;screen -x dalibor/pairprog&#8221; automatically will join the session named &#8220;pairprog&#8221; that is started by &#8220;dalibor&#8221; user on &#8220;guest&#8221; user login.</p>

<p>Next we need to install screen on the host machine (if it&#8217;s not already installed).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install screen
</span></code></pre></td></tr></table></div></figure>


<p>For security reasons, screen by default is installed so that other users within the system can not attach to screen session (error you will get is: &#8220;Must run suid root for multiuser support.&#8221;). To allow multi user setup you need to execute following (you might need to change the path if screen is installed in /usr/bin/screen for example):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo chmod +s /usr/bin/screen
</span><span class='line'>sudo chmod 755 /var/run/screen
</span></code></pre></td></tr></table></div></figure>


<p>Then you need to add the following screen config in ~/.screenrc file</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>hardstatus on
</span><span class='line'>hardstatus alwayslastline
</span><span class='line'>startup_message off
</span><span class='line'>termcapinfo xterm ti@:te@
</span><span class='line'>hardstatus string <span class="s2">&quot;%{= kG}%-w%{.rW}%n %t%{-}%+w %=%{..G} %H %{..Y} %m/%d %C%a &quot;</span>
</span><span class='line'>screen -t bash1 1
</span><span class='line'>
</span><span class='line'><span class="c"># multiuser setup</span>
</span><span class='line'>multiuser on
</span><span class='line'>aclchg guest -wx <span class="s2">&quot;#,?&quot;</span>
</span><span class='line'>aclchg guest +x <span class="s2">&quot;colon,wall,detach&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Most important lines are &#8220;multiuser on&#8221; which allows multiuser access in the screen session and &#8220;aclchg&#8221; command which removes all write and execute permissions for all windows (#) and all commands (?) for user guest. With this setup, host can do anything and guest can just watch the screen or message by using Ctrl-a: wall &#8220;hi there&#8221;.</p>

<p>Finally, communication goes like this: screen session is started by host with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>screen -S pairprog
</span></code></pre></td></tr></table></div></figure>


<p>Guest SSH to the host machine and automatically joins the screen session:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ssh guest@host
</span></code></pre></td></tr></table></div></figure>


<p>Then they can interact in the same terminal. More on the screen commands <a href="http://aperiodic.net/screen/multiuser">here</a>.</p>

<p>If you trust the user you can add full permission with &#8220;acladd&#8221;  command, and usually it&#8217;s to be done on a shared server. Say we have user1 and  user2 logged in on shared server via SSH, user1 has added user2 in  the ~/.screenrc file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>multiuser on
</span><span class='line'>acladd user2
</span></code></pre></td></tr></table></div></figure>


<p>And is starting pairprog screen session with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>screen -S pairprog
</span></code></pre></td></tr></table></div></figure>


<p>Then user2 can join that session with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>screen -x user1/pairprog
</span></code></pre></td></tr></table></div></figure>


<p>More info on screen command here in this <a href="http://aperiodic.net/screen/quick_reference">screen reference</a>. Basic commands are:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Ctrl-a d <span class="c"># detach screen window</span>
</span><span class='line'>Ctrl-a Ctrl-a <span class="c"># flip-flop between two windows</span>
</span><span class='line'>screen -r <span class="c"># re-attach screen window</span>
</span></code></pre></td></tr></table></div></figure>

</div>


      <footer>

        <div class="meta-data">
          















<section><time class="timestamp" datetime="2011-11-03T10:37:00+02:00" pubdate data-updated="true">
    <span class='day'> 03</span>
    <span class='month'> Nov</span>
    <span class='year'> 2011</span>
  </time></section>
          
  

<p class="meta"><span class="byline author vcard">Posted by <span class="fn">Dalibor Nasevic</span></span></p>

          <span> in </span>
          

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>
  
</span>



          
            <div class="sharing right">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.siyelo.com/remote-pair-programming-with-screen" data-via="siyelo" data-counturl="http://blog.siyelo.com/remote-pair-programming-with-screen" >Tweet</a>
  
  
  
</div>

          
        </div>

        <p class="meta pagination">
          
            <a class="basic-alignment left" href="/koding-in-khayelitsha-great-photo" title="Previous Post: Koding in Khayelitsha - great photo">Previous</a>
          
          
            <a class="basic-alignment right" href="/we-have-a-new-phone-number" title="Next Post: We have a new phone number!">Next</a>
          
        </p>

      </footer>
    </article>

    
      <section class="comments">
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  
  <aside class="sidebar">
    
      <section>
  <h1>About</h1>
  <ul id="about">
    <li>
      <p>Siyelo is a web development consultancy based in South Africa and Macedonia. We create bespoke web application that are profitable and enjoyable to use. This is our blog where we collect our thoughts and finds - please comment and let us know what you think.</p>
    </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weekly-roundup-5">TL;DR: Making Rails fast, Practical OO & Google data centers</a>
      </li>
    
      <li class="post">
        <a href="/weekly-roundup-4">TL;DR: Great RSpect tests, TripAdvisors growth & Going password-less</a>
      </li>
    
      <li class="post">
        <a href="/weekly-roundup-3">TL;DR: Lean from the Trenches, Schemaless SQL & Blowing in Nintendo cartridges</a>
      </li>
    
      <li class="post">
        <a href="/its-not-you-its-me">It's not you, it's me...</a>
      </li>
    
      <li class="post">
        <a href="/weekly-roundup-2">TL;DR: Ruby Security Guide, Macedonian parties & Moving things around</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <p class="on-github"><a href="https://github.com/siyelo">@siyelo</a> on GitHub</p>
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'siyelo',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("siyelo", 3, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/siyelo" class="twitter-follow-button" data-show-count="false">Follow @siyelo</a>
  
</section>





    
  </aside>
  
</div>

  <footer role="contentinfo"><footer id="footer">
    <div class="wrapper">
      <ul class="clearfix">
        <li class="fourth">
          <a title="Email us - we want to hear from you" class="marker" href="mailto:info@siyelo.com">@</a>
          <span>Contact</span>
          <ul>
            <li>phone</li>
            <li>+27214612050</li>
            <li>email:</li>
            <li>
              <a title="Email us - we want to hear from you" href="mailto:info@siyelo.com">info@siyelo.com</a>
            </li>
          </ul>
        </li>
        <li class="fourth">
          <a title="Siyelo office in Cape Town" class="marker" target="_blank" href="http://g.co/maps/7xbpg">A</a>
          <span>Cape Town</span>
          <ul>
            <li>Suite #1, 4th Floor</li>
            <li>79 Roeland Street</li>
            <li>Cape Town, 8001</li>
            <li>South Africa</li>
          </ul>
        </li>
        <li class="fourth">
          <a title="Siyelo office in Skopje" class="marker" target="_blank" href="http://g.co/maps/ssf42">B</a>
          <span>Skopje</span>
          <ul>
            <li>Suite #5, 1st Floor</li>
            <li>Marx &amp; Engels 7</li>
            <li>Skopje</li>
            <li>Macedonia</li>
          </ul>
        </li>
        <li class="fourth social">
          <a title="Siyelo on Twitter" href="http://twitter.com/#!/siyelo"><img alt="Siyelo on Twitter" src="http://siyelo.com/images/icons/twitter.png"></a>
          <a title="Siyelo on Github" href="http://github.com/siyelo"><img alt="Siyelo on Github" src="http://siyelo.com/images/icons/github.png"></a>
          <a title="Siyelo blog RSS feed" href="http://blog.siyelo.com/rss.xml"><img alt="Siyelo blog RSS feed" src="http://siyelo.com/images/icons/rss.png"></a>
        </li>
      </ul>
      <aside>
        <a class="left back_to_top" href="#header">Back to top</a>
        <div class="right">
          <a title="Creative Commons - some rights reserved" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
        </div>
      </aside>
    </div>
  </footer>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'siyelo';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.siyelo.com/remote-pair-programming-with-screen';
        var disqus_url = 'http://blog.siyelo.com/remote-pair-programming-with-screen';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
